# データサイエンスプログラミング入門 期末レポート課題

## 課題概要

本課題では、**乱数を用いて模擬的な学生成績データを生成**し、**データフレームの作成・記述統計量の算出・グループ集計・可視化**を行うプログラムを Python と R の両方で作成します。

第4章で学習した「記述統計」「可視化」「乱数」の知識を総合的に活用してください。

---

## 課題内容

### 設定

あなたは架空の「DSプログラミング演習」クラス（50名）の成績データを分析することになりました。
乱数を使って模擬データを生成し、以下の分析を行ってください。

### 生成するデータの仕様

以下の列を持つデータフレームを作成してください（50行）。

| 列名 | 内容 | 生成方法 |
|------|------|----------|
| `student_id` | 学生ID | 1〜50の連番 |
| `gender` | 性別 | **下記の固定パターンを使用**（乱数生成ではない） |
| `math` | 数学の点数 | 正規乱数（平均60、標準偏差15）で生成し、0〜100に収める |
| `prog` | プログラミングの点数 | 正規乱数（平均70、標準偏差10）で生成し、0〜100に収める |

### 性別の固定パターン【重要】

性別（`gender`）は以下のパターンで固定してください（乱数は使用しない）。

```
student_id 1〜25: "M"（男性）
student_id 26〜50: "F"（女性）
```

つまり、前半25人が男性、後半25人が女性となります。

### 乱数シード（seed）の設定【重要】

**乱数のシード（seed）は、自分の学籍番号の下2桁を使用してください。**

- 例：学籍番号が `256042` の場合、seed = `42`
- 例：学籍番号が `256007` の場合、seed = `7`

この設定により、各自異なるデータが生成されます。採点時にseedを確認しますので、必ず自分の学籍番号に基づく値を設定してください。

---

## 実施内容（タスク）

以下の5つのタスクを実施してください。

### タスク1：乱数シードの設定とデータ生成（25点）

- 学籍番号下2桁をシードとして設定する
- 正規乱数を用いて `math` と `prog` の点数を生成する
- 点数は**整数に丸め**、0未満は0、100超は100に補正する

### タスク2：データフレームの作成（15点）

- 生成したデータをデータフレームとして構築する
- 列名は `student_id`, `gender`, `math`, `prog` とする
- データフレームの先頭5行を表示する

### タスク3：記述統計量の算出（25点）

- 2科目（`math`, `prog`）について、以下を計算・表示する：
  - 平均（mean）
  - 標準偏差（sd）※Pythonでは `ddof=1` を使用
  - 最小値（min）
  - 最大値（max）

### タスク4：グループ集計（15点）

- 性別（`gender`）ごとに、2科目の平均点を計算・表示する
- 性別ごとの人数も表示する

### タスク5：ヒストグラムの作成と保存（15点）

- `math`（数学）の点数分布をヒストグラムで可視化する
- bins/breaks は10とする
- タイトル、軸ラベルを付ける（日本語または英語）
- ファイル名：
  - Python: `2560XX_hist_py.png`
  - R: `2560XX_hist_R.png`

  ※XXは学籍番号下2桁

### コメント記述（5点）

- ソースコード冒頭のコメント欄に、**プログラム概要と工夫した点を400字以内**で記述する

---

## 配点まとめ（合計100点）

| タスク | 内容 | 配点 |
|--------|------|------|
| タスク1 | 乱数シード設定とデータ生成 | 25点 |
| タスク2 | データフレーム作成 | 15点 |
| タスク3 | 記述統計量の算出 | 25点 |
| タスク4 | グループ集計 | 15点 |
| タスク5 | ヒストグラム作成・保存 | 15点 |
| コメント | プログラム概要・工夫点（400字以内） | 5点 |
| **合計** | | **100点** |

---

## 採点基準（部分点の詳細）

### タスク1：乱数シード設定とデータ生成（25点）

| 点数 | 基準 |
|------|------|
| 25点 | シードが正しく設定され、仕様通りのデータが生成されている |
| 20点 | シードは正しいが、点数の範囲補正（0〜100）が不完全 |
| 15点 | シードは正しいが、整数への丸めができていない |
| 10点 | シードが正しくないが、乱数生成の構造は正しい |
| 5点 | 乱数生成の一部のみ正しい |
| 0点 | 乱数が使われていない、またはデータが生成されていない |

### タスク2：データフレーム作成（15点）

| 点数 | 基準 |
|------|------|
| 15点 | 4列すべてが正しい列名・データ型でデータフレームに格納され、先頭5行が表示されている |
| 10点 | 列名またはデータ型に軽微な問題があるが、データフレームとして機能している |
| 5点 | データフレームは作成されているが、表示がない、または列が不足 |
| 0点 | データフレームが作成されていない |

### タスク3：記述統計量の算出（25点）

| 点数 | 基準 |
|------|------|
| 25点 | 2科目について平均・標準偏差・最小値・最大値が正しく計算・表示されている |
| 20点 | 計算は正しいが、Pythonで `ddof=1` が使われていない |
| 15点 | 一部の科目または一部の統計量のみ正しい |
| 10点 | 計算の試みはあるが、出力形式が不適切 |
| 0点 | 記述統計量が計算されていない |

### タスク4：グループ集計（15点）

| 点数 | 基準 |
|------|------|
| 15点 | 性別ごとの2科目平均と人数が正しく計算・表示されている |
| 10点 | 平均は正しいが、人数が表示されていない |
| 5点 | グループ集計の構造はあるが、結果が不正確 |
| 0点 | グループ集計が実施されていない |

### タスク5：ヒストグラム作成・保存（15点）

| 点数 | 基準 |
|------|------|
| 15点 | `math` のヒストグラムが正しいファイル名で保存され、タイトル・軸ラベルがある |
| 10点 | ヒストグラムは保存されているが、タイトルまたは軸ラベルが不足 |
| 5点 | ヒストグラムは作成されているが、ファイル保存されていない |
| 0点 | ヒストグラムが作成されていない |

### コメント記述（5点）

| 点数 | 基準 |
|------|------|
| 5点 | プログラム概要と工夫点が400字以内で具体的に記述されている |
| 3点 | 記述はあるが、内容が薄い、または字数オーバー |
| 0点 | コメント欄が空欄 |

---

## 提出要件

### 提出ファイル

以下の形式でファイル名を付け、2ファイルを提出してください。

1. **`2560XX_final_report.py`** - Python版プログラム
2. **`2560XX_final_report.R`** - R版プログラム

※ `XX` は学籍番号の下2桁（例：`256042` → `42`）

### 提出時に含まれるべき出力ファイル（プログラム実行により生成）

- `2560XX_hist_py.png`（Python版で生成）
- `2560XX_hist_R.png`（R版で生成）

### 提出方法

- 学習管理システム（LMS）の指定フォルダにアップロード
- 提出期限：別途指示

---

## 実行手順

### Python版

```bash
cd /home/datasci/work
python 2560XX_final_report.py
```

### R版

```bash
cd /home/datasci/work
Rscript 2560XX_final_report.R
```

---

## 注意事項

1. **Python と R の両方のプログラムを提出**してください。どちらか一方のみの場合、満点の半分が上限となります。

2. **乱数シードは必ず学籍番号下2桁を使用**してください。他人のシードを使用した場合、不正とみなす可能性があります。

3. **外部データのダウンロードは禁止**です。すべてのデータは乱数で生成してください。

4. **コード内のコメント欄**に、プログラム概要と工夫した点を必ず記述してください。

5. Python では分散・標準偏差を計算する際、R と結果を揃えるため **`ddof=1`** を使用してください。

6. 可視化の際、日本語フォントが使えない場合は **英語でも可**とします。

---

## テンプレートファイル

以下のテンプレートファイルを使用して作成してください。

- `final_report.py` - Python用テンプレート
- `final_report.R` - R用テンプレート

テンプレートには TODO コメントが含まれています。TODO の部分を自分で実装してください。

---

## 参考：使用する主な関数

### Python

| 目的 | 関数・メソッド |
|------|----------------|
| 乱数シード設定 | `np.random.default_rng(seed)` |
| 正規乱数 | `rng.normal(loc, scale, size)` |
| 整数に丸める | `np.round(x)` で丸め、`.astype(int)` で整数化 |
| 範囲を制限 | `np.clip(x, 0, 100)` |
| データフレーム作成 | `pd.DataFrame({...})` |
| 記述統計 | `df.mean()`, `df.std(ddof=1)`, `df.min()`, `df.max()` |
| グループ集計 | `df.groupby('gender')[cols].mean()` |
| 人数カウント | `df['gender'].value_counts()` |
| ヒストグラム | `plt.hist(df['math'], bins=10)` |
| 図の保存 | `plt.savefig(filename)` |

### R

| 目的 | 関数 |
|------|------|
| 乱数シード設定 | `set.seed(seed)` |
| 正規乱数 | `rnorm(n, mean, sd)` |
| 整数に丸める | `round(x)` で丸め、`as.integer()` で整数化 |
| 範囲を制限 | `pmin(pmax(x, 0), 100)` |
| データフレーム作成 | `data.frame(...)` |
| 記述統計 | `mean()`, `sd()`, `min()`, `max()` |
| グループ集計 | `aggregate(cbind(math, prog) ~ gender, data, mean)` |
| 人数カウント | `table(df$gender)` |
| ヒストグラム | `hist(df$math, breaks=10)` |
| 図の保存 | `png(filename); ...; dev.off()` |

---

**以上**
