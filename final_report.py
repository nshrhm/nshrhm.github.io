# =============================================================================
# データサイエンスプログラミング入門 期末レポート課題
# Python版テンプレート
# =============================================================================
# 学籍番号: 2560XX  （XXを自分の番号に変更）
# 氏名:             （自分の氏名を記入）
# =============================================================================
#
# 【プログラム概要・工夫した点】（400字以内で記述してください）
# ここにプログラムの概要と工夫した点を記述してください。
# 例：
# - 本プログラムは、乱数を用いて50人分の模擬成績データを生成し、
#   記述統計量の算出、性別グループ集計、可視化を行うものである。
# - 工夫した点として、...
#
#
#
#
#
# =============================================================================

import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

# 日本語フォント対応（環境によってはコメントアウトを外す）
# import japanize_matplotlib

# =============================================================================
# 設定
# =============================================================================

# TODO: 自分の学籍番号の下2桁をシードとして設定してください
# 例：学籍番号が 256042 の場合 → MY_SEED = 42
MY_SEED = 0  # ← ここを自分の学籍番号下2桁に変更

# 学籍番号下2桁（ファイル名に使用）
STUDENT_NUM = "XX"  # ← ここを自分の学籍番号下2桁に変更（例："42"）

# データ生成パラメータ
N_STUDENTS = 50  # 学生数

# 正規乱数のパラメータ（変更不要）
MATH_MEAN, MATH_SD = 60, 15
PROG_MEAN, PROG_SD = 70, 10

# =============================================================================
# タスク1: 乱数シード設定とデータ生成（25点）
# =============================================================================

print("=" * 60)
print("タスク1: データ生成")
print("=" * 60)

# TODO: 乱数生成器を作成してください
# ヒント: rng = np.random.default_rng(MY_SEED)
rng = None  # ← ここを修正

# 学生ID（1〜50の連番）- これは変更不要
student_id = list(range(1, N_STUDENTS + 1))

# 性別（固定パターン）- これは変更不要
# student_id 1〜25: "M", student_id 26〜50: "F"
gender = ["M"] * 25 + ["F"] * 25

# TODO: 数学の点数を正規乱数で生成してください
# ヒント: rng.normal(loc=MATH_MEAN, scale=MATH_SD, size=N_STUDENTS)
# 注意: 整数に丸め、0〜100の範囲に収めること
#   - 整数に丸める: np.round(x) で丸め → .astype(int) で整数型に変換
#   - 範囲を制限: np.clip(x, 0, 100) で 0未満は0、100超は100に
#   - 例: np.clip(np.round(乱数), 0, 100).astype(int)
math = None  # ← ここを修正

# TODO: プログラミングの点数を正規乱数で生成してください
# （数学と同様の手順）
prog = None  # ← ここを修正

print(f"シード値: {MY_SEED}")
print(f"生成データ数: {N_STUDENTS}人")

# =============================================================================
# タスク2: データフレーム作成（15点）
# =============================================================================

print("\n" + "=" * 60)
print("タスク2: データフレーム作成")
print("=" * 60)

# TODO: データフレームを作成してください
# ヒント: pd.DataFrame({'student_id': student_id, 'gender': gender, ...})
df = None  # ← ここを修正

# TODO: データフレームの先頭5行を表示してください
# ヒント: print(df.head())
print("\n【データフレームの先頭5行】")
# ← ここにコードを追加

# =============================================================================
# タスク3: 記述統計量の算出（25点）
# =============================================================================

print("\n" + "=" * 60)
print("タスク3: 記述統計量")
print("=" * 60)

# 集計対象の列
score_cols = ['math', 'prog']

# TODO: 2科目の平均を計算・表示してください
# ヒント: df[score_cols].mean()
print("\n【各科目の平均】")
# ← ここにコードを追加

# TODO: 2科目の標準偏差を計算・表示してください（ddof=1を使用）
# ヒント: df[score_cols].std(ddof=1)
print("\n【各科目の標準偏差】")
# ← ここにコードを追加

# TODO: 2科目の最小値を計算・表示してください
# ヒント: df[score_cols].min()
print("\n【各科目の最小値】")
# ← ここにコードを追加

# TODO: 2科目の最大値を計算・表示してください
# ヒント: df[score_cols].max()
print("\n【各科目の最大値】")
# ← ここにコードを追加

# =============================================================================
# タスク4: グループ集計（15点）
# =============================================================================

print("\n" + "=" * 60)
print("タスク4: 性別グループ集計")
print("=" * 60)

# TODO: 性別ごとの人数を表示してください
# ヒント: df['gender'].value_counts()
print("\n【性別ごとの人数】")
# ← ここにコードを追加

# TODO: 性別ごとの2科目平均を計算・表示してください
# ヒント: df.groupby('gender')[score_cols].mean()
print("\n【性別ごとの平均点】")
# ← ここにコードを追加

# =============================================================================
# タスク5: ヒストグラム作成・保存（15点）
# =============================================================================

print("\n" + "=" * 60)
print("タスク5: ヒストグラム作成")
print("=" * 60)

# TODO: 数学の点数のヒストグラムを作成してください
# ヒント: plt.hist(df['math'], bins=10)
# 注意: タイトル、軸ラベルを付けること

# plt.figure(figsize=(8, 6))
# ← ここにヒストグラム作成コードを追加
# plt.title('...')
# plt.xlabel('...')
# plt.ylabel('...')

# TODO: ヒストグラムを保存してください
# ヒント: plt.savefig(filename, dpi=150, bbox_inches='tight')
# 注意: ファイル名は 2560XX_hist_py.png（XXは学籍番号下2桁）
hist_filename = f"2560{STUDENT_NUM}_hist_py.png"
# ← ここに保存コードを追加
# plt.close()

print(f"ヒストグラム保存: {hist_filename}")

# =============================================================================
# 完了メッセージ
# =============================================================================

print("\n" + "=" * 60)
print("処理完了")
print("=" * 60)
print(f"生成ファイル:")
print(f"  - {hist_filename}")
